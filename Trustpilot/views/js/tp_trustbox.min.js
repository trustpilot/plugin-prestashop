function getController(){const t=window.location.search.substring(1).split("&");for(i=0;i<t.length;i++){const e=t[i].split("=");"controller"===e[0]&&"undefined"==typeof controller&&(controller=e[1])}"undefined"!=typeof help_class_name&&(controller=help_class_name)}function encodeSettings(t){let e="";for(const o in t)e+=o+"="+t[o]+"&";return e.substring(0,e.length-1)}getController(),document.addEventListener("DOMContentLoaded",function(){"undefined"!=typeof prestashop&&prestashop.on("updateProductList",t=>{if(void 0!==typeof tp&&"undefined"!=typeof trustpilot_trustbox_settings&&trustpilot_trustbox_settings.trustboxes.some(t=>t.repeat).length>0){const e=new XMLHttpRequest;e.open("POST",trustpilot_ajax_url),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.onreadystatechange=function(){4===e.readyState&&(e.status>=400?console.log(`callback error: ${e.response} ${e.status}`):(trustpilot_trustbox_settings.categoryProductsData=JSON.parse(e.response),tp("trustBox",trustpilot_trustbox_settings)))};const o={action:"get_category_product_info",products:JSON.stringify(t.products.map(t=>t.id_product)),controller:controller,user_id:user_id};e.send("settings="+btoa(encodeSettings(o)))}})}),void 0!==typeof tp&&"undefined"!=typeof trustpilot_trustbox_settings?tp("trustBox",trustpilot_trustbox_settings):document.addEventListener("DOMContentLoaded",function(){tp("trustBox",trustpilot_trustbox_settings)});
//# sourceMappingURL=tp_trustbox.min.js.map
